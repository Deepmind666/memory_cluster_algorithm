# 中国发明专利快申技术计划（R-007）

最后更新：2026-02-10  
适用范围：中国发明专利（仅技术与工程计划，不构成法律意见）

## 1. 目标定义
- 目标不是“堆概念”，而是用**最小但真实的技术创新**，在 2 周内形成可提交的技术方案包。
- 目标输出必须包含：
1. 可运行代码增量（不是纯文档创新）
2. 对比实验与技术效果证据
3. 可直接转化为权利要求的结构化技术点

## 2. 快申原则（中国审查导向）
- 方案必须体现技术问题、技术手段、技术效果三段闭环。
- 避免只写“算法规则/业务规则”；必须落在数据结构、处理流程、系统约束和可测指标。
- 快速申请不等于低质量：禁止虚构实验或夸大效果。

## 3. 当前基线（已具备）
- 已有闭环：碎片采集 -> 向量化 -> 增量聚类 -> 冲突显式 -> 偏好治理 -> 检索回溯。
- 已有工程资产：`src/memory_cluster/`、`tests/`、`scripts/run_benchmark.py`、`docs/prior_art/`。
- 已有可写入权利要求的基础特征：冲突结构、backrefs 可逆索引、L2 层次簇、检索分层过滤。

## 4. 最小可行创新包（建议主攻 3 点）

### 创新点 I：冲突证据图（Conflict Evidence Graph, CEG）
技术问题：同槽位多值冲突在多轮写入中难以追踪演化路径。  
技术手段：在 `MemoryCluster` 增加冲突演化图结构（节点=值，边=时间演化/来源切换），并提供冲突优先级计算。  
技术效果：提升冲突可追溯性与检索定位效率，降低人工回溯成本。

落地文件：
- `src/memory_cluster/models.py`
- `src/memory_cluster/compress.py`
- `src/memory_cluster/retrieve.py`
- `tests/test_conflict_marking.py`（扩展）

### 创新点 II：保留预算自适应控制（Adaptive Retention Budget, ARB）
技术问题：固定摘要预算在高冲突簇和低冲突簇场景下均不稳定。  
技术手段：将预算与冲突密度、来源分布熵、时效衰减联动，动态生成簇预算。  
技术效果：在相同总预算下提升证据保真度与关键冲突覆盖率。

落地文件：
- `src/memory_cluster/preference.py`
- `src/memory_cluster/compress.py`
- `src/memory_cluster/eval.py`
- `tests/test_preference_policy.py`（扩展）

### 创新点 III：双通道合并门控（Dual-Channel Merge Guard, DMG）
技术问题：仅靠语义相似度合并簇，容易把冲突语义相近簇误合并。  
技术手段：在合并时引入“语义通道 + 冲突兼容通道”双门控；兼容失败则禁止合并并标记原因。  
技术效果：减少错误合并，提升检索一致性和冲突分辨率。

落地文件：
- `src/memory_cluster/cluster.py`
- `src/memory_cluster/pipeline.py`
- `tests/test_clustering_basic.py`（扩展）

## 5. 两周执行计划（可直接排期）

### 第 1-2 天：创新冻结与基线锁定
1. 冻结现有 baseline（commit/tag）
2. 定义 3 个创新点的参数接口与数据结构
3. 完成对比实验模板（基线/消融）

交付：
- `docs/design/innovation_spec_cn.md`（新增）
- `outputs/baseline_metrics.json`

### 第 3-6 天：代码实现与单测
1. 完成 CEG 与 DMG 主体代码
2. 完成 ARB 策略逻辑
3. 单测扩展到 >= 16 条（当前 12 条基础上增加）

交付：
- 代码 PR 级变更
- `tests/` 新增边界用例

### 第 7-9 天：证据实验与消融
1. 运行 baseline vs +CEG vs +ARB vs +DMG vs 全量组合
2. 统计以下关键指标：
- 冲突漏检率
- 冲突定位平均步数
- 压缩后关键证据保真率
- 查询延迟 p95
3. 生成图表与结论表

交付：
- `outputs/ablation_metrics.json`
- `docs/eval/ablation_report_cn.md`

### 第 10-12 天：专利文本收口
1. 更新权利要求草案（独权锁定三创新耦合）
2. 更新实施例（写入可量化结果）
3. 完成“最接近现有技术-区别特征-技术效果”三联表

交付：
- `docs/patent_kit/06_权利要求书_草案.md`（更新）
- `docs/patent_kit/05_具体实施方式.md`（更新）
- `docs/patent_kit/08_对比文件与绕开说明.md`（更新）

### 第 13-14 天：代理人预审包
1. 打包代码、日志、实验、专利草案
2. 输出问题清单（法条风险、支持性风险、公开风险）

交付：
- `docs/patent_kit/10_代理人预审问题清单.md`（新增）
- `docs/FINAL_REPORT.md`（同步更新）

## 6. 权利要求策略（快申版）
- 独立权利要求只锁定 3-4 个耦合核心特征，不追求一口气覆盖所有实现细节。
- 从属权利要求承接：
1. 冲突证据图字段与更新规则
2. 动态预算公式与阈值
3. 双通道合并门控条件
4. L2 层次检索过滤触发条件

## 7. 评审门槛（提交前必须全部满足）
- 单测全绿且覆盖新增创新路径
- 至少 1 组消融实验显示相对提升
- 每个技术效果都能追溯到可复现实验
- 权利要求术语与代码字段一致（避免“文档词”和“代码词”脱节）

## 8. 风险与应对
- 风险：创新点仍被视为常规拼接  
应对：在对比中明确“门控条件 + 数据结构约束 + 量化效果”三者同时成立。

- 风险：时间紧导致证据不足  
应对：优先做可重复的小规模对照实验，不追求大规模但要可验证。

- 风险：继续公开导致新颖性进一步受损  
应对：拟申请核心改进在提交前不公开实现细节。

## 9. 结论
这套计划的核心是：用 2 周把“已有原型”升级成“有最小创新、可测效果、可写权利要求”的中国快申包。  
执行上优先完成 CEG + ARB + DMG 三个创新点，不做无证据的泛化扩展。
