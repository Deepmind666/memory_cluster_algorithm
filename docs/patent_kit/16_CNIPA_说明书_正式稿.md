# 16 CNIPA 说明书正式稿

## 发明名称
多智能体协同下的语义记忆碎片聚类压缩与冲突治理方法、系统、装置及存储介质

## 技术领域
[0001] 本发明涉及人工智能与数据处理技术领域，尤其涉及一种面向多智能体协同场景的语义记忆碎片聚类压缩与冲突治理方法、系统、装置及计算机可读存储介质。

## 背景技术
[0002] 在多智能体协同任务中，规划智能体、写作智能体、验证智能体等会持续写入中间结论、参数建议、工具输出和执行日志，形成共享记忆池。

[0003] 随着任务轮次增加，共享记忆池易出现冗余增长、同槽位多值冲突、上下文注入膨胀以及证据链断裂等问题。

[0004] 现有方案多采用滑动窗口保留或滚动摘要方式，虽可在单会话场景下降低文本长度，但在多智能体共享写入场景中，难以同时满足去重、冲突显式、策略化保留和可逆回溯。

[0005] 特别地，现有方案常将冲突值覆盖为单一结果，导致冲突来源不可追溯；同时，固定预算摘要难以在高冲突区域保留足够证据细节。

[0006] 此外，仅以语义相似度驱动簇合并，可能将语义接近但事实冲突的簇错误合并，造成后续推理一致性下降。

[0007] 因此，亟需一种兼顾压缩效率、冲突治理与审计可追溯性的技术方案。

## 发明内容

### 一、发明目的
[0008] 本发明的目的在于提供一种多智能体协同记忆治理方案，以解决共享记忆池中的冗余扩张、冲突隐式覆盖、预算分配粗粒度和证据不可逆回溯问题。

[0009] 本发明进一步提供对应的系统、装置和计算机可读存储介质，以支持工程化部署。

### 二、技术方案
[0010] 为实现上述目的，本发明提供一种多智能体协同记忆压缩与冲突治理方法，包括如下步骤：

[0011] S1，接收多个智能体写入的记忆碎片并标准化，所述记忆碎片至少包括内容字段、来源标识、时间戳和结构化槽位信息。

[0012] S2，对所述记忆碎片进行语义向量化并执行增量聚类，得到语义簇集合。

[0013] S3，在簇内检测同槽位多值冲突，构建冲突证据图；所述冲突证据图至少包括冲突值节点、值切换边和证据计数字段，并据此计算冲突优先级。

[0014] S4，基于冲突密度、来源分布和时效衰减计算簇级自适应保留预算，用于控制簇摘要细节保留强度。

[0015] S5，在簇合并阶段同时执行语义相似度通道与冲突兼容通道判定，仅当两个通道均满足阈值约束时允许合并；当冲突兼容度为零时阻断合并。

[0016] S6，在冲突语义抽取中执行条件作用域隔离、反事实作用域隔离与否定窗口识别，并进行跨句代词回指解析。

[0017] S7，生成簇摘要并保存可逆回溯索引 backrefs，使检索阶段可由摘要按需展开到原始证据碎片。

[0018] 在一些实施方式中，S5 还可选执行合并上界剪枝、候选筛选或近似候选检索，以减少精确比较开销；上述可选步骤不影响核心冲突治理链路。

### 三、有益效果
[0019] 与现有技术相比，本发明至少具有以下有益效果：

[0020] 第一，通过冲突证据图将冲突从隐式覆盖转变为结构化可计算对象，提升冲突可解释性与可审计性。

[0021] 第二，通过自适应预算策略将高冲突高价值簇分配更多细节预算，在固定容量约束下提高关键信息保真度。

[0022] 第三，通过双通道合并门控降低语义近似但事实冲突簇的误合并概率，提高跨智能体记忆一致性。

[0023] 第四，通过作用域隔离、否定识别和跨句回指联合抽取机制降低冲突语义误报漏报。

[0024] 第五，通过 backrefs 建立摘要到原始证据的可逆路径，增强后续追溯和审计能力。

## 附图说明
[0025] 图1为本发明系统总体架构示意图。

[0026] 图2为本发明方法流程示意图。

[0027] 图3为本发明记忆碎片、语义簇、冲突记录、偏好策略和回溯索引的数据关系示意图。

[0028] 图4为本发明冲突证据图构建与冲突优先级计算示意图。

[0029] 图5为本发明双通道合并门控判定示意图。

[0030] 图6为本发明检索与按需证据回溯流程示意图。

## 具体实施方式
[0031] 为使本领域技术人员更好理解本发明，以下结合附图与实施例对本发明进行进一步说明。应当理解，下述实施例仅用于说明本发明，而非用于限定本发明保护范围。

### 实施例一：冲突保真治理流程
[0032] 在本实施例中，系统接收来自规划智能体、写作智能体和验证智能体的记忆碎片，先执行语义向量化，再通过增量聚类归入目标簇。

[0033] 当同一槽位出现多个互斥值时，系统不覆盖历史值，而是创建冲突值节点并记录值切换边与证据计数，形成冲突证据图。

[0034] 冲突优先级可由冲突值数量、值切换次数和证据数量进行加权计算，得到用于排序的冲突治理优先级。

[0035] 针对冲突密度高且来源熵高的簇，系统分配更高摘要预算，以保留更多证据细节；针对低价值噪声簇，执行预算限幅后的降级保留。

[0036] 在合并阶段，若语义相似度满足阈值但冲突兼容度不满足阈值，则阻断合并，避免形成混合冲突簇。

[0037] 最终输出簇摘要并写入 backrefs，检索时先返回摘要，再按需展开原始碎片证据。

### 实施例二：语义精度增强流程
[0038] 在本实施例中，对于包含条件句、反事实句和否定表达的记忆碎片，系统先执行作用域识别，再执行槽位提取。

[0039] 对于条件句，仅抽取后件有效语义；对于反事实表达，标记为条件分支语义；对于否定表达，执行否定窗口识别以保留极性信息。

[0040] 对于跨句代词表达，系统将中文代词和英文代词映射到最近有效槽位，以提高冲突抽取稳定性。

### 实施例三：可选加速实施方式
[0041] 在本实施例中，可在簇合并前执行相似度上界剪枝，当理论上界低于合并阈值时跳过精确比较。

[0042] 还可选建立候选筛选邻接关系，或采用多表近似候选检索，与上述剪枝联合使用，以进一步减少比较对数量。

[0043] 上述加速步骤作为可选实施方式，可与核心冲突治理链路解耦部署。

### 系统与装置实施方式
[0044] 本发明还提供一种系统或装置，包括处理器、存储器以及存储于存储器并可在处理器上运行的程序指令。

[0045] 所述程序指令被执行时，实现本说明书所述方法步骤。

[0046] 所述系统可划分为碎片采集模块、语义向量化模块、增量聚类模块、冲突证据图构建模块、自适应预算模块、双通道合并门控模块、语义抽取与回指解析模块、索引与检索模块。

### 其他说明
[0047] 本发明中的阈值、权重、预算限幅区间可根据任务域和数据分布配置，不限定具体数值。

[0048] 本发明中的存储实现可采用 JSONL、关系数据库或键值存储，不构成对本发明保护范围的限制。

[0049] 本发明中的向量化实现可替换，不限定为特定模型或特定维度。

[0050] 在不脱离本发明精神和实质的前提下，本领域技术人员可对本发明作出各种修改或等同替换，均应落入本发明保护范围。

