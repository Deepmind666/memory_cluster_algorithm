<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="860" viewBox="0 0 1600 860">
  <defs>
    <style><![CDATA[
      .title { font: 700 31px "Microsoft YaHei", "PingFang SC", sans-serif; fill: #10243e; }
      .box { fill: #f7fbff; stroke: #1d3f66; stroke-width: 2.4; }
      .boxWarn { fill: #fff5eb; stroke: #9a5f21; stroke-width: 2.4; }
      .name { font: 700 21px "Microsoft YaHei", "PingFang SC", sans-serif; fill: #10243e; }
      .lb { font: 500 18px "Microsoft YaHei", "PingFang SC", sans-serif; fill: #173a60; }
      .edge { stroke: #1d3f66; stroke-width: 2.8; fill: none; }
      .edge2 { stroke: #9a5f21; stroke-width: 2.8; fill: none; }
    ]]></style>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="9" markerHeight="9" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#1d3f66"/>
    </marker>
    <marker id="arrow2" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="9" markerHeight="9" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#9a5f21"/>
    </marker>
  </defs>

  <rect x="0" y="0" width="1600" height="860" fill="#ffffff"/>
  <text x="800" y="58" text-anchor="middle" class="title">图5 双通道合并门控判定示意图</text>

  <rect x="80" y="290" width="260" height="100" rx="16" ry="16" class="box"/>
  <text x="210" y="335" text-anchor="middle" class="name">候选簇对输入</text>
  <text x="210" y="365" text-anchor="middle" class="lb">Cluster_i, Cluster_j</text>

  <rect x="470" y="190" width="350" height="150" rx="16" ry="16" class="box"/>
  <text x="645" y="238" text-anchor="middle" class="name">501 语义相似度通道</text>
  <text x="645" y="274" text-anchor="middle" class="lb">sim(i,j) >= T_sim_merge ?</text>
  <text x="645" y="308" text-anchor="middle" class="lb">输出：Pass/Fail</text>

  <rect x="470" y="430" width="350" height="150" rx="16" ry="16" class="boxWarn"/>
  <text x="645" y="478" text-anchor="middle" class="name">502 冲突兼容通道</text>
  <text x="645" y="514" text-anchor="middle" class="lb">compat(i,j) >= T_conflict ?</text>
  <text x="645" y="548" text-anchor="middle" class="lb">输出：Pass/Fail</text>

  <circle cx="980" cy="385" r="72" fill="#f2f7ff" stroke="#1d3f66" stroke-width="2.4"/>
  <text x="980" y="378" text-anchor="middle" class="name">与门</text>
  <text x="980" y="408" text-anchor="middle" class="lb">Pass AND Pass</text>

  <rect x="1150" y="235" width="330" height="120" rx="16" ry="16" class="box"/>
  <text x="1315" y="282" text-anchor="middle" class="name">503 合并允许输出</text>
  <text x="1315" y="316" text-anchor="middle" class="lb">执行簇合并</text>

  <rect x="1150" y="430" width="330" height="120" rx="16" ry="16" class="boxWarn"/>
  <text x="1315" y="477" text-anchor="middle" class="name">504 合并阻断输出</text>
  <text x="1315" y="511" text-anchor="middle" class="lb">保留冲突并拒绝合并</text>

  <path d="M340 340 L470 265" class="edge" marker-end="url(#arrow)"/>
  <path d="M340 340 L470 505" class="edge" marker-end="url(#arrow)"/>
  <path d="M820 265 L930 350" class="edge" marker-end="url(#arrow)"/>
  <path d="M820 505 L930 420" class="edge2" marker-end="url(#arrow2)"/>

  <path d="M1048 345 L1150 295" class="edge" marker-end="url(#arrow)"/>
  <text x="1105" y="310" text-anchor="middle" class="lb">是</text>

  <path d="M1048 425 L1150 490" class="edge2" marker-end="url(#arrow2)"/>
  <text x="1105" y="470" text-anchor="middle" class="lb">否</text>

  <rect x="80" y="680" width="1500" height="130" rx="14" ry="14" fill="#f2f7ff" stroke="#98b2d0" stroke-width="1.8"/>
  <text x="110" y="725" class="lb">门控规则：仅当语义相似度通道与冲突兼容通道同时通过时，输出“允许合并”；任一通道失败则输出“阻断合并”。</text>
  <text x="110" y="760" class="lb">当兼容度为0（例如槽位值集合无交集）时，冲突通道直接 Fail，避免语义近似但事实冲突的误合并。</text>
</svg>

