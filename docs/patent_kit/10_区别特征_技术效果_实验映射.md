# 10 区别特征-技术效果-实验数据映射

- 生成时间: 2026-02-11T03:13:26.013241+00:00
- 数据集快照时间: 2026-02-11T03:12:54.572520+00:00
- 证据条目数: 7

## 一、总览

| 特征ID | 区别特征 | 权利要求 | 关键效果指标 | 状态 |
|---|---|---|---|---|
| DF-01 | 冲突证据图 CEG | 权利要求14 | small_top1_conflict_priority_gain=8.8; small_conflict_priority_avg_gain=8.8 | implemented_and_measured |
| DF-02 | 自适应预算 ARB | 权利要求15 | small_detail_budget_avg_gain=68; small_avg_summary_chars_gain=209 | implemented_and_measured |
| DF-03 | 双通道合并门控 DMG | 权利要求16 | small_mixed_mode_clusters_reduction=1; small_merge_block_gain=4 | implemented_and_measured |
| DF-04 | 合并上界剪枝 Prune | 权利要求17 | primary_avg_speedup_ratio=0.000192; primary_optimized_pairs_pruned=0 | implemented_and_measured |
| DF-05 | 签名桶候选筛选 Candidate Filter | 权利要求18 | sparse_attempt_reduction_ratio=0.442717; sparse_avg_speedup_ratio=-0.057202 | implemented_and_measured |
| DF-06 | ANN 多表近似候选与混合门控 | 权利要求19 | sparse_ann_avg_speedup_ratio=0.097216; sparse_ann_quality_gate_pass=True | implemented_measured_not_default |
| DF-07 | 冲突语义精度回归集 | 权利要求20 | case_count=8; case_pass_rate=1 | implemented_and_measured |

## 二、逐项映射

### DF-01 冲突证据图 CEG
- 权利要求映射: 权利要求14
- 技术问题: 同槽位冲突值无法形成可计算证据链
- 技术手段: 冲突节点 + 切换边 + 主导值 + 优先级
- 技术效果: 冲突优先级可量化并可排序
- 指标证据:
  - small_top1_conflict_priority_gain: 8.8
  - small_conflict_priority_avg_gain: 8.8
  - large_top1_conflict_priority_gain: 5.8
  - large_conflict_priority_avg_gain: 2.29
- 证据文件:
  - `outputs/ablation_metrics.json`
  - `outputs/ablation_metrics_large.json`
  - `docs/eval/ablation_report_cn.md`
  - `src/memory_cluster/compress.py`

### DF-02 自适应预算 ARB
- 权利要求映射: 权利要求15
- 技术问题: 固定摘要预算在冲突高密度场景下证据保真不足
- 技术手段: 冲突密度 + 来源熵 + 时效衰减联合分配预算
- 技术效果: 关键簇预算与摘要信息量提升
- 指标证据:
  - small_detail_budget_avg_gain: 68
  - small_avg_summary_chars_gain: 209
  - large_detail_budget_avg_gain: 38.2
  - large_avg_summary_chars_gain: 64.4
- 证据文件:
  - `outputs/ablation_metrics.json`
  - `outputs/ablation_metrics_large.json`
  - `docs/eval/ablation_report_large_cn.md`
  - `src/memory_cluster/preference.py`

### DF-03 双通道合并门控 DMG
- 权利要求映射: 权利要求16
- 技术问题: 仅凭语义相似度会误合并冲突簇
- 技术手段: 语义阈值 + 冲突兼容阈值双通道联合门控
- 技术效果: 混合冲突簇减少，误合并可阻断
- 指标证据:
  - small_mixed_mode_clusters_reduction: 1
  - small_merge_block_gain: 4
  - stress_mixed_mode_clusters_reduction: 1
  - stress_merge_block_gain: 120
- 证据文件:
  - `outputs/ablation_metrics.json`
  - `outputs/ablation_metrics_stress.json`
  - `docs/eval/ablation_report_stress_cn.md`
  - `src/memory_cluster/cluster.py`

### DF-04 合并上界剪枝 Prune
- 权利要求映射: 权利要求17
- 技术问题: 簇合并 pair 全比较导致计算冗余
- 技术手段: 余弦上界估计，低于阈值直接剪枝
- 技术效果: 减少完整相似度计算并在稀疏场景提升速度
- 指标证据:
  - primary_avg_speedup_ratio: 0.000192
  - primary_optimized_pairs_pruned: 0
  - sparse_avg_speedup_ratio: 0.171783
  - sparse_optimized_pairs_pruned: 2519
  - realistic_avg_speedup_ratio: -0.009119
  - cluster_count_equal_primary: True
- 证据文件:
  - `outputs/prune_benchmark.json`
  - `docs/eval/prune_benchmark_report.md`
  - `src/memory_cluster/cluster.py`

### DF-05 签名桶候选筛选 Candidate Filter
- 权利要求映射: 权利要求18
- 技术问题: 大规模候选对数量过大
- 技术手段: 按签名桶和邻桶限制候选邻接图
- 技术效果: 显著减少 merge attempts，并在当前 active 基准保持结果一致
- 指标证据:
  - sparse_attempt_reduction_ratio: 0.442717
  - sparse_avg_speedup_ratio: -0.057202
  - active_attempt_reduction_ratio: 0.281385
  - active_avg_speedup_ratio: -0.101915
  - active_cluster_count_equal: True
  - active_merges_applied_equal: True
- 证据文件:
  - `outputs/candidate_filter_benchmark.json`
  - `docs/eval/candidate_filter_benchmark_report.md`
  - `src/memory_cluster/cluster.py`

### DF-06 ANN 多表近似候选与混合门控
- 权利要求映射: 权利要求19
- 技术问题: 进一步降低候选枚举复杂度常数
- 技术手段: 多表签名 + 邻域探针 + candidate/ann/hybrid 门控
- 技术效果: 在稀疏场景有加速，但 active 场景当前实现存在负加速
- 指标证据:
  - sparse_ann_avg_speedup_ratio: 0.097216
  - sparse_ann_quality_gate_pass: True
  - active_ann_avg_speedup_ratio: -0.096991
  - active_ann_quality_gate_pass: False
  - active_hybrid_avg_speedup_ratio: -0.52839
  - active_hybrid_quality_gate_pass: True
- 证据文件:
  - `outputs/ann_hybrid_benchmark.json`
  - `docs/eval/ann_hybrid_benchmark_report.md`
  - `src/memory_cluster/cluster.py`

### DF-07 冲突语义精度回归集
- 权利要求映射: 权利要求20
- 技术问题: 条件/否定/跨句指代造成冲突语义误提取
- 技术手段: 条件后件截断 + 双重否定窗口 + 槽位回指解析
- 技术效果: 语义抽取回归集零误报违规
- 指标证据:
  - case_count: 8
  - case_pass_rate: 1
  - expected_hit_rate: 1
  - forbidden_violations: 0
- 证据文件:
  - `outputs/semantic_regression_metrics.json`
  - `docs/eval/semantic_regression_report.md`
  - `src/memory_cluster/compress.py`

## 三、复现实验命令

```powershell
python scripts/run_ablation.py --output outputs/ablation_metrics.json --report docs/eval/ablation_report_cn.md
python scripts/run_ablation.py --output outputs/ablation_metrics_large.json --report docs/eval/ablation_report_large_cn.md --fragment-count 100 --similarity-threshold 0.68 --merge-threshold 0.82 --dataset-label synthetic_conflict_memory_case_large
python scripts/run_ablation.py --output outputs/ablation_metrics_stress.json --report docs/eval/ablation_report_stress_cn.md --fragment-count 100 --similarity-threshold 1.1 --merge-threshold 0.05 --dataset-label synthetic_conflict_memory_case_stress
python scripts/run_prune_benchmark.py --output outputs/prune_benchmark.json --report docs/eval/prune_benchmark_report.md
python scripts/run_candidate_filter_benchmark.py --output outputs/candidate_filter_benchmark.json --report docs/eval/candidate_filter_benchmark_report.md
python scripts/run_ann_hybrid_benchmark.py --output outputs/ann_hybrid_benchmark.json --report docs/eval/ann_hybrid_benchmark_report.md
python scripts/run_semantic_regression.py --output outputs/semantic_regression_metrics.json --report docs/eval/semantic_regression_report.md
python scripts/build_patent_evidence_pack.py --output outputs/patent_evidence_pack.json --report docs/patent_kit/10_区别特征_技术效果_实验映射.md
```

## 四、工程决策快照

- 当前默认推荐路径: `prune_only (exact merge)`。
- Candidate Filter 状态: `implemented_and_measured`（稀疏场景收益明显，active 场景需按质量门槛调参）。
- ANN 方案状态: `implemented_measured_not_default`（active 场景仍有负加速，后续继续调优）。
- 说明: 本文档为技术证据索引，不构成法律意见。
